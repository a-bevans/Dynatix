<!-- This is the page when user is viewing their ticket (actual barcode) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynatix</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <!-- <img src="images/Dynatix Logo.png" alt="Dynatix Logo"> -->
        <h1>Dynatix</h1>
    </header>
    <main>
        <section id="ticket-info">
            <!-- Ticket information will be displayed here -->
            <section id="event-info">
                <script>
                var phoneNumber = localStorage.getItem('phoneNumber');
                console.log("TEST" + phoneNumber);
                fetch(`http://localhost:3000/myTickets?phoneNumber=${phoneNumber}`)
                // get ticket info to display on site
                .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
                })
                .then(data => {
                    // Check if data.codes is an array and not empty
                    if (Array.isArray(data.codes) && data.codes.length > 0) {
                        // Iterate over each ticket in the array
                        data.codes.forEach(ticket => {
                            // Display ticket information
                            document.getElementById('event-info').innerHTML += `
                                <p>Ticket ID: ${ticket._ticketID}</p>
                                <p>Event: ${ticket.event}</p>
                                <p>Location: ${ticket.location}</p>
                                <p>Event Date: ${ticket.eventDate}</p>
                            `;
                        });
                    } else {
                        document.getElementById('event-info').innerHTML = 'No tickets found.';
                    }
                })
                .catch(error => console.error('Error:', error));
                
                </script>
            </section>
            
            <div class='spacer'></div>
            <div class='anim-box'>
            <div></div>
            <div class='scanner'></div>
              <!-- insert moving barcode here -->
              <div class='scanner'></div>
              <div id="anim-box">
                  
                  <!-- temporary only -->
                  <img id="barcode" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAB0CAYAAABUmhYnAAAAAklEQVR4AewaftIAAAKxSURBVO3BQW7sWAwEwSxC979yjpdcPUCQusfmZ0T8wRqjWKMUa5RijVKsUYo1SrFGKdYoxRqlWKMUa5RijVKsUYo1SrFGKdYoFw8l4ZtU7khCp9IloVPpkvBNKk8Ua5RijVKsUS5epvKmJNyRhE7lROUOlTcl4U3FGqVYoxRrlIsPS8IdKnck4SQJnUqXhE7ljiTcofJJxRqlWKMUa5SLYVS6JJyoTFKsUYo1SrFGufjHJOFE5S8r1ijFGqVYo1x8mMo3JaFTOUnCEyq/SbFGKdYoxRrl4mVJ+D+pdEnoVJ5Iwm9WrFGKNUqxRrl4SOUvScIdKn9JsUYp1ijFGuXioSR0Kl0S3qTSqdyh0iXhJAlvUvmkYo1SrFGKNcrFQyonKidJOFHpkvBNKl0SOpWTJJwkoVN5olijFGuUYo0Sf/CiJHQqJ0noVLokdCp3JOFEpUtCp3KShE7lJAmdypuKNUqxRinWKPEHL0rCHSp3JOFE5ZOS8CaVNxVrlGKNUqxRLl6mcpKEkyScqDyRhE6lS0Kn0ql0SehUTpLwScUapVijFGuU+IM/LAmdykkS3qRykoQ7VJ4o1ijFGqVYo1w8lIRvUulUTpLQqXRJ6FS6JNyRhE6lS0Kn8qZijVKsUYo1ysXLVN6UhJMkdConSThJwonKiUqXhE6lS0Kn8kSxRinWKMUa5eLDknCHyhNJ6FROktCpnCShUzlR6ZLQqbypWKMUa5RijXIxjMo3JeFEpVP5pGKNUqxRijXKxTBJuEOlS0Kn0qn8ZsUapVijFGuUiw9T+SSVN6nckYQ7VD6pWKMUa5RijXLxsiR8UxKeUOmS0Kl0SehU7khCp/KmYo1SrFGKNUr8wRqjWKMUa5RijVKsUYo1SrFGKdYoxRqlWKMUa5RijVKsUYo1SrFGKdYo/wF9oBDlsJjGOwAAAABJRU5ErkJggg==">
              
              </div>
              <p>SCREENSHOTS ARE NOT VALID</p>
            </div>
            <div class='spacer'></div>    
        <section id="ticket-actions">
            <!-- Ticket actions (e.g., generate, transfer) will be displayed here -->
            <a href="transferTicket.html">
                <button id="transfer-ticket">Transfer Ticket</button>
            </a>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2024 Dynatix. All rights reserved.</p>
    </footer>
    <script src="script.js"></script>
</body>
</html>
